<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Using the jruby-ehcache API directly</title><link rel="Prev" href="co-jruby_configuring_ehcache_for_jruby.html" title="Previous"><link rel="Next" href="co-jruby_using_ehcache_from_within_rails.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pN_002bvqcFDIUzQgOCohE2iNr9Q" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/co-jruby_using_the_jruby_ehcache_api.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/ehcache_all.1.188.html#wwconnect_header">Related Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/ehcache_all.1.265.html#wwconnect_header">Integrations</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-jruby_using_ehcache_with_jruby_and_rails.html#wwconnect_header">Using Ehcache with JRuby and Rails</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Using the jruby-ehcache API directly</span></div><div class="ww_skin_page_toolbar"><!-- Twitter --><!--         --><!-- FaceBook Like --><!--               --><!-- LinkedIn Share --><!--                --><!-- Google +1 --><!--           --><!--        <a wwpage:condition="print-enabled" class="ww_behavior_print ww_skin ww_skin_print" title="Print" wwpage:attribute-title="navigation-print-title" href="#">&#160;</a>  --></div></header><div id="ww3_12_6_11_11_1" class="Heading_3">Using the jruby-ehcache API directly</div><div id="ww3_12_6_11_11_2_2_3" class="Body">To make Ehcache available to JRuby:</div><div id="ww3_12_6_11_11_2_2_5" class="Preformatted">require 'ehcache'</div><div id="ww3_12_6_11_11_2_2_7" class="Body">Note that, because jruby-ehcache is provided as a Ruby Gem, you must make your Ruby interpreter aware of Ruby Gems in order to load it. You can do this by either including -rubygems on your jruby command line, or you can make Ruby Gems available to JRuby globally by setting the RUBYOPT environment variable as follows:</div><div id="ww3_12_6_11_11_2_2_9" class="Preformatted">export RUBYOPT=rubygems</div><div id="ww3_12_6_11_11_2_2_11" class="Body">To create a CacheManager, which you do once when the application starts:</div><div id="ww3_12_6_11_11_2_2_13" class="Preformatted">manager = Ehcache::CacheManager.new</div><div id="ww3_12_6_11_11_2_2_15" class="Body">To access an existing cache (call it "sampleCache1"):</div><div id="ww3_12_6_11_11_2_2_17" class="Preformatted">cache = manager.cache("sampleCache1")</div><div id="ww3_12_6_11_11_2_2_19" class="Body">To create a new cache from the defaultCache:</div><div id="ww3_12_6_11_11_2_2_21" class="Preformatted">cache = manager.cache</div><div id="ww3_12_6_11_11_2_2_23" class="Body">To put into a cache:</div><div id="ww3_12_6_11_11_2_2_25" class="Preformatted">cache.put("key", "value", {:ttl =&gt; 120})</div><div id="ww3_12_6_11_11_2_2_27" class="Body">To get from a cache:</div><div id="ww3_12_6_11_11_2_2_29" class="Preformatted">cache.get("key")  # Returns the Ehcache Element object <br>cache["key"]      # Returns the value of the element directly</div><div id="ww3_12_6_11_11_2_2_31" class="Body">To shut down the CacheManager: This is only when you shut your application down. It is not necessary to call this if the cache is configured for persistence or is clustered with Terracotta, but it is always a good idea to do it.</div><div id="ww3_12_6_11_11_2_2_33" class="Preformatted">manager.shutdown</div><div id="ww3_12_6_11_11_2_4_3" class="Section_Title">Supported Properties</div><div id="ww3_12_6_11_11_2_4_5" class="Body">The following caching options are supported in JRuby:</div><div class="ww_skin_page_overflow"><table class="Table" summary=""><tr><td class="Table_Cell_Head" style="background-color: #D6D6D6; border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: bottom; width: 29.1%"><div id="ww3_12_6_11_11_2_4_7_2_8_2_2" class="Table_Cell_Head">Property</div></td><td class="Table_Cell_Head" style="background-color: #D6D6D6; border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: bottom; width: 25%"><div id="ww3_12_6_11_11_2_4_7_2_8_2_4" class="Table_Cell_Head">Argument Type</div></td><td class="Table_Cell_Head" style="background-color: #D6D6D6; border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: bottom; width: 45.8%"><div id="ww3_12_6_11_11_2_4_7_2_8_2_6" class="Table_Cell_Head">Description</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_2_2" class="Table_Cell">unlessExist, ifAbsent</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_2_4" class="Table_Cell">boolean</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_2_6" class="Table_Cell">If true, use the putIfAbsent method.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_4_2" class="Table_Cell">elementEvictionData</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_4_4" class="Table_Cell">ElementEvictionData</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_4_6" class="Table_Cell">Sets this element’s eviction data instance.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_6_2" class="Table_Cell">eternal</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_6_4" class="Table_Cell">boolean</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_6_6" class="Table_Cell">Sets whether the element is eternal.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_8_2" class="Table_Cell">timeToIdle, tti</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_8_4" class="Table_Cell">int</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_8_6" class="Table_Cell">Sets time to idle.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_10_2" class="Table_Cell">timeToLive, ttl, expiresIn</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_10_4" class="Table_Cell">int</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_10_6" class="Table_Cell">Sets time to live.</div></td></tr><tr><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_12_2" class="Table_Cell">version</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_12_4" class="Table_Cell">long</div></td><td class="Table_Cell" style="border-bottom-color: Black; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: Black; border-left-style: solid; border-left-width: 1px; border-right-color: Black; border-right-style: solid; border-right-width: 1px; border-top-color: Black; border-top-style: solid; border-top-width: 1px; padding-bottom: 3px; padding-left: 8px; padding-right: 8px; padding-top: 0px; vertical-align: top"><div id="ww3_12_6_11_11_2_4_7_2_10_12_6" class="Table_Cell">Sets the version attribute of the ElementAttributes object.</div></td></tr></table></div><div id="ww3_12_6_11_11_2_6_3" class="Section_Title">Example Configuration</div><div id="ww3_12_6_11_11_2_6_5" class="Preformatted">class SimpleEhcache <br> #Code here <br> require 'ehcache' <br> manager = Ehcache::CacheManager.new <br> cache = manager.cache <br> cache.put("answer", "42", {:ttl =&gt; 120}) <br> answer = cache.get("answer") <br> puts "Answer: #{answer.value}" <br> question = cache["question"] || 'unknown' <br> puts "Question: #{question}" <br> manager.shutdown <br>end</div><div id="ww3_12_6_11_11_2_6_7" class="Body">As you can see from the example, you create a cache using CacheManager.new, and you can control the “time to live” value of a cache entry using the :ttl option in cache.put.</div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright © <span>2014</span><span> </span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/product_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
             |&nbsp;&nbsp;
         <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></div></body></html>