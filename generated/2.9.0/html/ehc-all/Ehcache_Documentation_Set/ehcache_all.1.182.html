<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Caching Methods with Spring 3 Annotations</title><link rel="Prev" href="co-recipe_database_write_overload.html" title="Previous"><link rel="Next" href="co-recipe_cache_wrapper.html" title="Next"><link rel="StyleSheet" href="css/ehcache_all.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/ehcache_all_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pCXAAPo3z3eY_002bog7FqJIJag" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/Ehcache_Documentation_Set/ehcache_all.1.182.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/ehcache_all.1.017.html#wwconnect_header">Product Documentation</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_parent"><a href="../Ehcache_Documentation_Set/to-pubhead_ehcache_recipes.html#wwconnect_header">Ehcache Recipes</a></span><span class="ww_skin_breadcrumbs_divider"> : </span><span class="ww_skin_breadcrumbs_current">Caching Methods with Spring 3 Annotations</span></div><div class="ww_skin_page_toolbar"><!-- Twitter --><!--         --><!-- FaceBook Like --><!--               --><!-- LinkedIn Share --><!--                --><!-- Google +1 --><!--           --><!--        <a wwpage:condition="print-enabled" class="ww_behavior_print ww_skin ww_skin_print" title="Print" wwpage:attribute-title="navigation-print-title" href="#">&#160;</a>  --></div></header><div id="ww3_9_7_21_1" class="Heading_2">Caching Methods with Spring 3 Annotations</div><div id="ww3_9_7_21_3_2_3" class="Body">This recipe explains adding caching to methods using the Ehcache Annotations for Spring project.</div><div id="ww3_9_7_21_3_4_3" class="Section_Title">Problem</div><div id="ww3_9_7_21_3_4_5" class="Body">You'd like to cache methods of your application with minimal code changes and use configuration to control the cache settings.</div><div id="ww3_9_7_21_3_6_3" class="Section_Title">Solution</div><div id="ww3_9_7_21_3_6_5" class="Body">Use the <span class="external"><a href="http://code.google.com/p/ehcache-spring-annotations/" target="external_window">Ehcache Annotations for Spring project at code.google.com</a></span> to dynamically configure caching of method return values.</div><div id="ww3_9_7_21_3_8_3" class="Section_Title">Discussion</div><div id="ww3_9_7_21_3_8_5" class="Body">The Ehcache Annotations for Spring project is a successor to the Spring-Modules project. This project will allow you to configure caching of method calls dynamically using just configuration.</div><div id="ww3_9_7_21_3_8_7" class="Body">The way it works is that the parameter values of the method will be used as a composite key into the cache, caching the return value of the method.</div><div id="ww3_9_7_21_3_8_9" class="Body">For example, suppose you have a method: <span class="codeph">Dog getDog(String name)</span>.</div><div id="ww3_9_7_21_3_8_11" class="Body">Once caching is added to this method, all calls to the method will be cached using the "name" parameter as a key.</div><div id="ww3_9_7_21_3_8_13" class="Body">So, assume at time t0 the application calls this method with the name equal to "fido". Since "fido" doesn't exist, the method is allowed to run, generating the "fido" Dog object, and returning it. This object is then put into the cache using the key "fido".</div><div id="ww3_9_7_21_3_8_15" class="Body">Then assume at time t1 the application calls this method with the name equal to "spot". The same process is repeated, and the cache is now populated with the Dog object named "spot".</div><div id="ww3_9_7_21_3_8_17" class="Body">Finally, at time t2 the application again calls the method with the name "fido". Since "fido" exists in the cache, the "fido" Dog object is returned from the cache instead of calling the method.</div><div id="ww3_9_7_21_3_8_19" class="Body">To implement this in your application, follow these steps:</div><div id="ww3_9_7_21_3_8_21_2" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>1. </span></span>Add the jars to your application as listed on the <span class="external"><a href="http://code.google.com/p/ehcache-spring-annotations/" target="external_window">Ehcache Annotations for Spring project site</a></span>.</div><div id="ww3_9_7_21_3_8_21_4" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>2. </span></span>Add the Annotation to methods you would like to cache. Lets assume you are using the Dog getDog(String name) method from above:</div><div id="ww3_9_7_21_3_8_21_4_4" class="Preformatted_1">@Cacheable(name="getDog") <br>Dog getDog(String name) <br>{ <br>    .... <br>}</div><div id="ww3_9_7_21_3_8_21_6" class="Numbered_1"><span class="WebWorks_Number" style="width: 18pt"><span>3. </span></span>Configure Spring. You must add the following to your Spring configuration file in the beans declaration section:</div><div id="ww3_9_7_21_3_8_21_6_4" class="Preformatted_1">&lt;ehcache:annotation-driven cache-manager="ehCacheManager" /&gt;</div><div id="ww3_9_7_21_3_8_23" class="Body">More details can be found at:</div><div id="ww3_9_7_21_3_8_25_2" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="external"><a href="http://code.google.com/p/ehcache-spring-annotations/" target="external_window">Ehcache Annotations for Spring project site</a></span></div><div id="ww3_9_7_21_3_8_25_4" class="List_1"><span class="WebWorks_Number" style="width: 18pt"><span><img src="bullet.gif" alt="*" border="0" width="10" height="10"></span></span><span class="external"><a href="http://www.jeviathon.com/2010/04/caching-java-methods-with-spring-3.html" target="external_window">This blog</a></span></div><footer><!-- Related Topics --><!--                --><!-- Back to Top --><!--             --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br></footer><div><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 11px; margin-top: 20px; margin-bottom: 20px;"><span class="xref"><a href="http://documentation.softwareag.com/legal/" target="external_window">Copyright Â© <span>2014</span><span> </span><span></span><span></span> Software AG, Darmstadt, Germany</a></span>.</div><hr><div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 13px; font-weight: bold; margin-top: 20px;"><span><img style="vertical-align:middle" src="../connect/product_online.png" alt="Product Logo"><!--	     <a href="https://empower.softwareag.com/ContactSupport/default.asp" target="_blank" >Contact&#160;Support</a> --><!--         &#160;&#160;|&#160;&#160;  --><!--         <a href="http://www.softwareag.com/corporate/community/default.asp" target="_blank" >Community</a>  --><!--         &#160;&#160;  -->
             |&nbsp;&nbsp;
         <a href="mailto://documentation@softwareag.com" target="_blank">Feedback&nbsp;&nbsp;</a></span></div></div></body></html>